---
layout: fr_reference
---

<div class="box">
  <h2>
    <span class="docs">
      <a target="new" href="http://git-scm.com/book/fr/Les-bases-de-Git-Visualiser-l-historique-des-validations">livre</a>
    </span>
    Inspection et Comparaison
  </h2>
  <div class="block">
    <p>
      Vous avez désormais plusieurs branches dont vous vous servez pour des
      besoins temporaires, des fonctionnalités durables et autres. Comment
      vous y retrouver parmi celles-ci ? Git a différents outils pour vous
      aider à savoir où un travail donné a eu lieu, quelles sont les différences
      entre deux branches et bien d'autres choses.
    </p>

    <p class="nutshell">
      <b>Pour résumer</b>, vous utilisez <code>git log</code> pour retrouver des
      commits spécifiques dans l'historique de votre projet—par auteur, date,
      contenu et historique. Vous pouvez utiliser <code>git diff</code> pour comparer
      deux points différents dans votre historique—habituellement pour voir de quelle
      manière deux branches diffèrent ou ce qui a changé entre une version de votre
      logiciel et une autre.
    </p>
  </div>
</div>

<div class="box">
  <h2>
    <span class="docs">
      <a target="new" href="http://git-scm.com/docs/git-log">docs</a> &nbsp;
      <a target="new" href="http://git-scm.com/book/fr/Les-bases-de-Git-Visualiser-l-historique-des-validations#Limiter-la-longueur-de-l'historique">livre</a>
    </span>
    <a name="log">git log</a>
    <span class="desc">limite la longueur de l'historique</span>
  </h2>

  <div class="block">
    <p>Nous avons déjà vu comment utiliser <code>git log</code> pour comparer
      des branches, en visualisant les commits d'une branche (si vous ne vous
      en souvenez pas, cela ressemble à : <code>git log brancheA ^brancheB</code>).
      Cependant, vous pouvez utiliser <code>git log</code> pour rechercher un
      commit spécifique. Ici nous allons nous intéresser à certaines options
      communément utilisées par <code>git log</code>, mais il en existe de très
      nombreuses. Reportez-vous à la documentation officielle pour la liste complète.
    </p>

    <h4 id="log-author">
      git log --author
      <small>recherche uniquement les commits d'un auteur en particulier</small>
    </h4>

    <p>
      Pour filtrer l'historique de vos commits suivant seulement ceux effectués
      par un auteur en particulier, vous pouvez utiliser l'option <code>--author</code>.
      Par exemple, disons que nous recherchons les commits du code source de Git
      qui ont été effectués par Linus. Nous exécuterions quelque chose comme
      <code>git log --author=Linus</code>. La recherche est sensible à la casse
      et recherchera aussi l'adresse email. L'exemple suivant utilise l'option
      <code>-[nombre]</code>, qui limite les résultats aux [nombre] derniers
      commits.
    </p>

<pre>
<b>$ git log --author=Linus --oneline -5</b>
81b50f3 Move 'builtin-*' into a 'builtin/' subdirectory
3bb7256 make "index-pack" a built-in
377d027 make "git pack-redundant" a built-in
b532581 make "git unpack-file" a built-in
112dd51 make "mktag" a built-in
</pre>

    <h4 id="log-date">
      git log --since --before
      <small>filtre les commits suivant leur date</small>
    </h4>

    <p>
      Si vous voulez spécifier un intervalle de temps pour filtrer vos commits,
      vous pouvez utiliser plusieurs options comme  <code>--since</code>
      et <code>--before</code>, ou vous pouvez aussi utiliser <code>--until</code>
      et <code>--after</code>. Par exemple, pour voir tous les commits du projet
      Git d'il y a trois semaines mais après le 18 Avril, vous pourriez exécuter ceci
      (nous allons aussi utiliser <code>--no-merges</code> pour ignorer les commits
      de fusion) :
    </p>

<pre>
<b>$ git log --oneline --before={3.weeks.ago} --after={2010-04-18} --no-merges</b>
5469e2d Git 1.7.1-rc2
d43427d Documentation/remote-helpers: Fix typos and improve language
272a36b Fixup: Second argument may be any arbitrary string
b6c8d2d Documentation/remote-helpers: Add invocation section
5ce4f4e Documentation/urls: Rewrite to accomodate transport::address
00b84e9 Documentation/remote-helpers: Rewrite description
03aa87e Documentation: Describe other situations where -z affects git diff
77bc694 rebase-interactive: silence warning when no commits rewritten
636db2c t3301: add tests to use --format="%N"
</pre>

    <h4 id="log-grep">
      git log --grep
      <small>filtre les commits suivant leur message</small>
    </h4>

    <p>
      Vous désireriez peut-être également rechercher les commits avec une certaine
      phrase comme message de commit. Utilisez <code>--grep</code> pour cela.
      Disons qu'il y ait un commit qui portait sur la variable d'environnement P4EDITOR
      et que vous vouliez vous remémorer à quoi ressemblaient ses modificiations—vous
      pourriez retrouver cet commit avec <code>--grep</code>.
    </p>

<pre>
<b>$ git log --grep=P4EDITOR --no-merges</b>
<span class="yellow">commit 82cea9ffb1c4677155e3e2996d76542502611370</span>
Author: Shawn Bohrer
Date:   Wed Mar 12 19:03:24 2008 -0500

    git-p4: Use P4EDITOR environment variable when set

    Perforce allows you to set the P4EDITOR environment variable to your
    preferred editor for use in perforce.  Since we are displaying a
    perforce changelog to the user we should use it when it is defined.

    Signed-off-by: Shawn Bohrer &lt;shawn.bohrer@gmail.com>
    Signed-off-by: Simon Hausmann &lt;simon@lst.de>
</pre>

    <p>
      Git va faire un OU logique de tous les arguments <code>--grep</code> et
      <code>--author</code>. Si vous voulez utiliser <code>--grep</code> et
      <code>--author</code> pour voir tous les commits qui ont été crééxes
      par quelqu'un et ont un contenu de message spécifique, vous devez utiliser
      l'option <code>--all-match</code>. Dans les exemples nous allons utiliser
      l'option <code>--format</code>, afin de voir qui est l'auteur de chaque commit.
    </p>

    <p>Si nous recherchons les commits dont le message contient « p4 depo »,
      nous obtenons ces trois commits :</p>

<pre>
<b>$ git log --grep="p4 depo" --format="%h %an %s"</b>
ee4fd1a Junio C Hamano Merge branch 'master' of git://repo.or.cz/git/fastimport
da4a660 Benjamin Sergeant git-p4 fails when cloning a p4 depo.
1cd5738 Simon Hausmann Make incremental imports easier to use by storing the p4 d
</pre>

      <p>Si nous ajoutons l'argument <code>--author=Hausmann</code>,
        au lieu de filtrer les commits de Simon, il va plutôt nous montrer
        toutes les commtis de Simon ou dont le message contient « p4 depo ».</p>

<pre>
<b>$ git log --grep="p4 depo" --format="%h %an %s" --author="Hausmann"</b>
cdc7e38 Simon Hausmann Make it possible to abort the submission of a change to Pe
f5f7e4a Simon Hausmann Clean up the git-p4 documentation
30b5940 Simon Hausmann git-p4: Fix import of changesets with file deletions
4c750c0 Simon Hausmann git-p4: git-p4 submit cleanups.
0e36f2d Simon Hausmann git-p4: Removed git-p4 submit --direct.
edae1e2 Simon Hausmann git-p4: Clean up git-p4 submit's log message handling.
4b61b5c Simon Hausmann git-p4: Remove --log-substitutions feature.
36ee4ee Simon Hausmann git-p4: Ensure the working directory and the index are cle
e96e400 Simon Hausmann git-p4: Fix submit user-interface.
38f9f5e Simon Hausmann git-p4: Fix direct import from perforce after fetching cha
2094714 Simon Hausmann git-p4: When skipping a patch as part of "git-p4 submit" m
1ca3d71 Simon Hausmann git-p4: Added support for automatically importing newly ap
...
</pre>

        <p>Néanmoins, ajouter <code>--all-match</code> va vous retourner les résultats
          que vous attendiez :</p>

<pre>
<b>$ git log --grep="p4 depo" --format="%h %an %s" --author="Hausmann" --all-match</b>
1cd5738 Simon Hausmann Make incremental imports easier to use by storing the p4 d
</pre>

          <h4 id="log-s">
            git log -S
            <small>filtre suivant les changements introduits</small>
          </h4>

          <p>
            Que faire si vos messages de commits sont vraiment mauvais ? Ou si
            vous recherchez quand une fonction a été rajoutée, ou quand des
            variables ont commencé à être utilisées ? Vous pouvez aussi dire à Git
            de rechercher parmi les modifications de chaque commit pour une certaine
            chaîne de caractères. Par exemple, si nous voulions trouver quelles
            commits ont modifié tout ce qui ressemble au nom de function
            « userformat_find_requirements', nous exécuterions ceci (notez qu'il
            n'y a pas de « = » entre le « -S » et ce que vous recherchez) :
          </p>

<pre>
<b>$ git log -Suserformat_find_requirements</b>
<span class="yellow">commit 5b16360330822527eac1fa84131d185ff784c9fb</span>
Author: Johannes Gilger
Date:   Tue Apr 13 22:31:12 2010 +0200

    pretty: Initialize notes if %N is used

    When using git log --pretty='%N' without an explicit --show-notes, git
    would segfault. This patches fixes this behaviour by loading the needed
    notes datastructures if --pretty is used and the format contains %N.
    When --pretty='%N' is used together with --no-notes, %N won't be
    expanded.

    This is an extension to a proposed patch by Jeff King.

    Signed-off-by: Johannes Gilger
    Signed-off-by: Junio C Hamano
</pre>

          <h4 id="log-patch">
            git log -p
            <small>affiche le correctif introduit par chaque commit</small>
          </h4>

          <p>
            Chaque commit est un instantané de votre projet, mais étant donné que
            chaque commit connaît l'instantané sur lequel il est basé, Git peut toujours
            calculer la différence et vous l'afficher sous forme de correctif. Cela
            signifie que pour chaque commit vous pouvez obtenir le correctif que
            ce commit a introduit dans le projet. Vous pouvez le faire soit
            en exécutant <code>git show [SHA]</code> avec un SHA spécifique de commit,
            ou vous pouvez utiliser <code>git log -p</code>, qui dit à Git de mettre le
            correctif après chaque commit. C'est un très bon moyen de résumer ce
            qui est arrivé sur une branche ou entre des commits.
          </p>

<pre>
<b>$ git log -p --no-merges -2</b>
<span class="yellow">commit 594f90bdee4faf063ad07a4a6f503fdead3ef606</span>
Author: Scott Chacon &lt;schacon@gmail.com>
Date:   Fri Jun 4 15:46:55 2010 +0200

    reverted to old class name

<span class="umber">diff --git a/ruby.rb b/ruby.rb
index bb86f00..192151c 100644
--- a/ruby.rb
+++ b/ruby.rb</span>
<span class="lblue">@@ -1,7 +1,7 @@</span>
<span class="red">-class HiWorld</span>
<span class="green">+class HelloWorld</span>
   def self.hello
     puts "Hello World from Ruby"
   end
 end

<span class="red">-HiWorld.hello</span>
<span class="green">+HelloWorld.hello</span>

<span class="yellow">commit 3cbb6aae5c0cbd711c098e113ae436801371c95e</span>
Author: Scott Chacon &lt;schacon@gmail.com>
Date:   Fri Jun 4 12:58:53 2010 +0200

    fixed readme title differently

<span class="umber">diff --git a/README b/README
index d053cc8..9103e27 100644
--- a/README
+++ b/README</span>
<span class="lblue">@@ -1,4 +1,4 @@</span>
<span class="red">-Hello World Examples</span>
<span class="green">+Many Hello World Examples</span>
 ======================

 This project has examples of hello world in
</pre>

          <p>C'est un très bon moyen de résumer les changements ou passer en revue
            une série de commits avant de les fusionner ou de publier quoi que ce soit.</p>

          <h4 id="log-stat">
            git log --stat
            <small>affiche un résumé des modifications introduites par chaque commit</small>
          </h4>

          <p>Si vous trouvez l'option <code>-p</code> trop verbeuse, vous pouvez résumer
            les changements avec <code>--stat</code> à la place. Voici la même sortie du
            journal avec <code>--stat</code> à la place de <code>-p</code>.</p>

<pre>
<b>$ git log --stat --no-merges -2</b>
<span class="yellow">commit 594f90bdee4faf063ad07a4a6f503fdead3ef606</span>
Author: Scott Chacon &lt;schacon@gmail.com>
Date:   Fri Jun 4 15:46:55 2010 +0200

    reverted to old class name

 ruby.rb |    4 <span class="green">++</span><span class="red">--</span>
 1 files changed, 2 insertions(+), 2 deletions(-)

<span class="yellow">commit 3cbb6aae5c0cbd711c098e113ae436801371c95e</span>
Author: Scott Chacon &lt;schacon@gmail.com>
Date:   Fri Jun 4 12:58:53 2010 +0200

    fixed readme title differently

 README |    2 <span class="green">+</span><span class="red">-</span>
 1 files changed, 1 insertions(+), 1 deletions(-)
</pre>

            <p>Basiquement les mêmes informations, mais plus succintement—vous pouvez
              toujours voir les différences et queles fichiers ont été modifiés.</p>

          </div>
        </div>

        <div class="box">
          <h2>
            <span class="docs">
              <a target="new" href="http://git-scm.com/docs/git-diff">docs</a> &nbsp;
              <a target="new" href="http://git-scm.com/book/fr/Git-distribu%C3%A9-Maintenance-d-un-projet#Déterminer-les-modifications-introduites">livre</a>
            </span>
            <a name="diff">git diff</a>
            <span class="desc"></span>
          </h2>

          <div class="block">

            <p>Enfin, pour voir les changements absolus entre deux instantanés,
              vous pouvez utiliser la commande <code>git diff</code>. C'est utilisé
              principalement dans deux cas—voir en quoi deux branches diffèrent
              l'une de l'autre et voir ce qui a changé depuis la publication d'une version
              ou tout autre moment donné passé dans l'historique.
              Voyons chacune de ces situations.</p>

            <p>Pour voir ce qui a changé depuis la dernière publication, vous pouvez
              simplement exécuter <code>git diff [version]</code> (ou tout autre étiquette
              attribuée à la publication). Par exemple, si vous voulez voir ce qui a changé
              dans votre projet depuis la version v0.9, vous pouvez exécuter
              <code>git diff v0.9</code>.
            </p>

<pre>
<b>$ git diff v0.9</b>
<span class="umber">diff --git a/README b/README
index d053cc8..d4173d5 100644
--- a/README
+++ b/README</span>
<span class="lblue">@@ -1,4 +1,4 @@</span>
<span class="red">-Hello World Examples</span>
<span class="green">+Many Hello World Lang Examples</span>
 ======================

 This project has examples of hello world in
<span class="umber">diff --git a/ruby.rb b/ruby.rb
index bb86f00..192151c 100644
--- a/ruby.rb
+++ b/ruby.rb</span>
<span class="lblue">@@ -1,7 +1,7 @@</span>
<span class="red">-class HiWorld</span>
<span class="green">+class HelloWorld</span>
   def self.hello
     puts "Hello World from Ruby"
   end
 end

<span class="red">-HiWorld.hello</span>
<span class="green">+HelloWorld.hello</span>
</pre>

            <p>Tout comme <code>git log</code>, vous pouvez utiliser l'option
              <code>--stat</code> avec.</p>

<pre>
<b>$ git diff v0.9 --stat</b>
 README  |    2 +-
 ruby.rb |    4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)
</pre>

              <p>Pour comparer deux branches divergentes, néanmoins, vous pouvez exécuter
                quelque chose de similaire à <code>git diff branchA branchB</code> mais
                le problème est que cela va faire exactement ce que vous lui
                demandez—cela va concrètement vous fournir le correctif qui transformerai l'instantané
                à la pointe de la branche brancheA en l'instantané de la pointe de la
                branche brancheB. Cela signifie que si deux branches ont divergé—elles
                ont pris des directions différentes—cela va occulter toutes les modifications
                introduites dans brancheA puis ajouter tout ce qui a été introduit dans brancheB.
                Ce n'est probablement pas ce que vous voulez—vous voulez les changements ajoutés
                à brancheB qui ne sont pas dans brancheA, vous voulez donc vraiment les différences
                là où les deux branches ont divergé et la pointe de brancheB. Donc,
                si notre historique ressemble à ça :</p>

<pre>
<b>$ git log --graph --oneline --decorate --all</b>
* 594f90b (HEAD, tag: v1.0, master) reverted to old class name
| * 1834130 (erlang) added haskell
| * ab5ab4c added erlang
|/
*   8d585ea Merge branch 'fix_readme'
...
</pre>

                <p>Et si nous voulions voir ce qui se trouve sur la branche « erlang »
                  par rapport à la branche « master », exécuter <code>git diff master erlang</code>
                  ne nous afficherait pas la bonne chose.</p>

<pre>
<b>$ git diff --stat master erlang</b>
 erlang_hw.erl |    5 +++++
 haskell.hs    |    4 ++++
 ruby.rb       |    4 ++--
 3 files changed, 11 insertions(+), 2 deletions(-)
</pre>

                  <p>Vous voyez que cela a ajouté les fichiers erlang et haskell, qui est ce
                    que nous avons fait dans cette branche, mais la sortie revient aussi sur les
                    changements du fichier ruby que nous avons effectués dans la branche master.
                    Ce que nous voulons vraiment voir sont juste les changements qui ont été faits
                    dans la branche « erlang » (l'ajout des deux fichiers). Nous pouvons obtenir le
                    résultat attendu en faisant la différence entre le commit commun depuis lequel
                    elles ont divergé :</p>

<pre>
<b>$ git diff --stat 8d585ea erlang</b>
 erlang_hw.erl |    5 +++++
 haskell.hs    |    4 ++++
 2 files changed, 9 insertions(+), 0 deletions(-)
</pre>

                    <p>C'est ce que nous recherchons, mais nous ne désirons pas avoir à nous
                      souvenir à chaque fois depuis quel commit les deux branches ont divergé.
                      Heureusement, Git a un raccourci pour ça. Si vous exécutez
                      <code>git diff master...erlang</code> (avec trois points entre les noms de
                      branches), Git va automatiquement savoir quel est le commit commun
                      (aussi connu sous le nom de « base de fusion ») entre les deux commits et
                      afficher les modifications en se basant sur celui-ci.</p>

<pre>
<b>$ git diff --stat master erlang</b>
 erlang_hw.erl |    5 +++++
 haskell.hs    |    4 ++++
 ruby.rb       |    4 ++--
 3 files changed, 11 insertions(+), 2 deletions(-)
<b>$ git diff --stat master...erlang</b>
 erlang_hw.erl |    5 +++++
 haskell.hs    |    4 ++++
 2 files changed, 9 insertions(+), 0 deletions(-)
</pre>

                      <p>Quasiment à chaque fois que vous voudrez comparer deux branches, vous voudrez
                        utiliser la syntaxe du triple-point, parce-qu'elle vous donnera sûrement toujours
                        ce que vous désirez.
                      </p>

                      <p>En guise de bonus, vous pouvez aussi faire calculer manuellement par Git quelle
                        serait la base de fusion (le premier commit parent commun) entre deux commits
                        avec la commande <code>git merge-base</code> :</p>

<pre>
<b>$ git merge-base master erlang</b>
8d585ea6faf99facd39b55d6f6a3b3f481ad0d3d
</pre>

                        <p>Vous pouvez faire l'équivalent de <code>git diff master...erlang</code>
                          en exécutant :</p>

<pre>
<b>$ git diff --stat $(git merge-base master erlang) erlang</b>
 erlang_hw.erl |    5 +++++
 haskell.hs    |    4 ++++
 2 files changed, 9 insertions(+), 0 deletions(-)
</pre>

                          <p>Vous préférerez peut-être utiliser la forme simple de la syntaxe néanmoins.</p>


                          <p class="nutshell">
                            <b>Pour résumer</b> vous pouvez utiliser <code>git diff</code> pour voir
                            comment un projet a changé depuis un moment donné ou pour voir quel travail
                            est contenu dans une branche depuis qu'elle a divergé d'une autre. Utilisez
                            toujours <code>git diff brancheA...brancheB</code> pour inspecter brancheB
                            par rapport à brancheA pour vous simplifier la vie.
                          </p>

                        </div>
                      </div>

                      <p>Et c'est la fin ! Pour plus d'informations, veuillez lire le
                        <a href="http://git-scm.com/book/fr/">Livre Pro Git</a>.</p>
